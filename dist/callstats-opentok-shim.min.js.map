{"version":3,"sources":["callstats-opentok-shim-es5.js"],"names":["_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","value","length","err","Array","isArray","Object","TypeError","CallstatsOpenTok","isPCTPc","pcConfig","iceServers","len","username","includes","isShortCall","constraints","reportError","pc","fnName","callstatsConn","webRtcFunc","webRTCFunctions","sessionId","wrapError","failure","getConnections","copy","Map","connections","forEach","v","k","set","idGenerator","d","Date","getTime","replace","c","r","Math","random","toString","onConnection","connId","remoteId","fabricEvents","audioMute","audioUnmute","videoPause","videoResume","screenShareStart","screenShareStop","dominantSpeaker","origPeerConnection","window","RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","newPeerConnection","config","uuid","remoteUuid","kind","capableSimulcastStreams","peerConnection","usage","fabricUsage","multiplex","addNewFabric","msg","console","log","warn","origGetStats","getStats","bind","_len","arguments","args","_key","apply","catch","ex","success","res","origCreateOffer","createOffer","_len2","_key2","_constraints","failureWrap","origCreateAnswer","createAnswer","_len3","_key3","_constraints2","origSetLocalDescription","setLocalDescription","_len4","_key4","sdp","origSetRemoteDescription","setRemoteDescription","_len5","_key5","origAddIceCandidate","addIceCandidate","_len6","_key6","candidate","onsignalingstatechange","event","signalingState","delete","obj","hasOwnProperty","keys","x","prototype","initialize","params","statsCallback","initCallback","configParams","IdGenerator","AppId","AppSecret","SessionId","OnConnection","Id","info","RemoteId","InitCallback","StatsCallback","ConfigParams","callstats","error","sendUserFeedback","feedback","sendFabricEvent","eventName","fabrics","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_ref","_ref2","iceConnectionState","return"],"mappings":"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","file":"callstats-opentok-shim.min.js"}